name: Network Test

on: workflow_dispatch

jobs:
  test-network:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Install dependencies
      run: sudo apt-get install mtr-tiny

    - name: Run network-test.sh
      run: bash ./network-test.sh
      # This step assumes network-test.sh is executable and in the root directory of the repository

    - name: Upload endpoints_json output
      uses: actions/upload-artifact@v2
      with:
        name: endpoints_json
        path: endpoints_output.txt

    - name: Expose Output
      run: echo "Network test output exposed in the workflow log"
